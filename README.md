# Bè¶…ç”Ÿæˆæ–°ç”Ÿå„¿ç…§ - å¾®ä¿¡å°ç¨‹åº

åŸºäºPRDå’ŒAPIæ–‡æ¡£æ„å»ºçš„å®Œæ•´å¾®ä¿¡å°ç¨‹åºé¡¹ç›®ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
detectBaby/
â”œâ”€â”€ miniprogram/                 # å°ç¨‹åºä»£ç 
â”‚   â”œâ”€â”€ app.js                   # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ app.json                 # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ app.wxss                 # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ pages/                   # é¡µé¢ç›®å½•
â”‚   â”‚   â”œâ”€â”€ home/                # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ upload/              # ä¸Šä¼ é¡µ
â”‚   â”‚   â”œâ”€â”€ validate/            # æ ¡éªŒé¡µ
â”‚   â”‚   â”œâ”€â”€ unlock/              # è§£é”é¡µ
â”‚   â”‚   â”œâ”€â”€ job/                 # ç”Ÿæˆä¸­é¡µ
â”‚   â”‚   â”œâ”€â”€ result/              # ç»“æœé¡µ
â”‚   â”‚   â”œâ”€â”€ history/             # å†å²è®°å½•é¡µ
â”‚   â”‚   â””â”€â”€ settings/            # è®¾ç½®é¡µ
â”‚   â””â”€â”€ images/                  # å›¾ç‰‡èµ„æº
â”œâ”€â”€ cloudfunctions/              # äº‘å‡½æ•°ç›®å½•
â”‚   â”œâ”€â”€ login/                   # ç™»å½•è·å–openid
â”‚   â”œâ”€â”€ validateUltrasound/      # Bè¶…æ ¡éªŒ
â”‚   â”œâ”€â”€ unlockPrepare/           # å‡†å¤‡è§£é”ä¼šè¯
â”‚   â”œâ”€â”€ unlockClaimAd/           # å¹¿å‘Šè§£é”
â”‚   â”œâ”€â”€ unlockClaimPay/          # æ”¯ä»˜è§£é”
â”‚   â”œâ”€â”€ orderCreate/             # åˆ›å»ºè®¢å•
â”‚   â”œâ”€â”€ wxPrepay/                # å¾®ä¿¡é¢„æ”¯ä»˜
â”‚   â”œâ”€â”€ wxPayNotify/             # æ”¯ä»˜å›è°ƒ
â”‚   â”œâ”€â”€ generationCreate/        # åˆ›å»ºç”Ÿæˆä»»åŠ¡
â”‚   â”œâ”€â”€ generationGet/           # æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
â”‚   â”œâ”€â”€ assetGet/                # è·å–èµ„äº§é“¾æ¥
â”‚   â”œâ”€â”€ originalDownload/        # è·å–åŸå›¾
â”‚   â”œâ”€â”€ galleryHome/             # é¦–é¡µå‚è€ƒå›¾
â”‚   â”œâ”€â”€ userHistory/             # ç”¨æˆ·å†å²
â”‚   â””â”€â”€ userDataDelete/          # åˆ é™¤ç”¨æˆ·æ•°æ®
â”œâ”€â”€ project.config.json          # é¡¹ç›®é…ç½®
â””â”€â”€ README.md                    # è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½®äº‘å¼€å‘ç¯å¢ƒ

1. æ‰“å¼€å¾®ä¿¡å¼€å‘è€…å·¥å…·
2. å¯¼å…¥æœ¬é¡¹ç›®
3. åœ¨ `project.config.json` ä¸­å¡«å†™ä½ çš„ AppID
4. å¼€é€šäº‘å¼€å‘ï¼Œè·å–ç¯å¢ƒID
5. åœ¨ `miniprogram/app.js` ä¸­æ›¿æ¢ç¯å¢ƒID

### 2. åˆ›å»ºæ•°æ®åº“é›†åˆ

åœ¨äº‘å¼€å‘æ§åˆ¶å°åˆ›å»ºä»¥ä¸‹é›†åˆï¼š

- `uploads` - ä¸Šä¼ è®°å½•
- `ultrasound_validations` - æ ¡éªŒè®°å½•
- `unlock_sessions` - è§£é”ä¼šè¯
- `generation_jobs` - ç”Ÿæˆä»»åŠ¡
- `assets` - èµ„äº§
- `orders` - è®¢å•
- `payments` - æ”¯ä»˜è®°å½•
- `gallery_items` - å‚è€ƒå›¾åº“

### 3. éƒ¨ç½²äº‘å‡½æ•°

åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œå³é”®æ¯ä¸ªäº‘å‡½æ•°ç›®å½•ï¼Œé€‰æ‹©"ä¸Šä¼ å¹¶éƒ¨ç½²"ã€‚

### 4. é…ç½®å¾®ä¿¡æ”¯ä»˜ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€ä½¿ç”¨å¾®ä¿¡æ”¯ä»˜åŠŸèƒ½ï¼š
1. åœ¨å¾®ä¿¡æ”¯ä»˜å•†æˆ·å¹³å°å®Œæˆé…ç½®
2. åœ¨äº‘å¼€å‘æ§åˆ¶å°å…³è”å¾®ä¿¡æ”¯ä»˜
3. é…ç½®æ”¯ä»˜å›è°ƒäº‘å‡½æ•°

### 5. é…ç½®æ¿€åŠ±è§†é¢‘å¹¿å‘Šï¼ˆå¯é€‰ï¼‰

1. åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°ç”³è¯·å¹¿å‘Šä½
2. è·å–å¹¿å‘Šå•å…ƒID
3. åœ¨ `pages/unlock/unlock.js` ä¸­æ›¿æ¢å¹¿å‘Šå•å…ƒID

## ğŸ“± åŠŸèƒ½è¯´æ˜

### æ ¸å¿ƒæµç¨‹

1. **ä¸Šä¼ Bè¶…å›¾** â†’ é€‰æ‹©/æ‹ç…§å›¾ç‰‡
2. **å›¾ç‰‡æ ¡éªŒ** â†’ æ£€æµ‹æ˜¯å¦ä¸ºBè¶…å›¾ã€æ˜¯å¦å«æ•æ„Ÿä¿¡æ¯
3. **è§£é”ç”Ÿæˆ** â†’ è§‚çœ‹å¹¿å‘Šæˆ–ä»˜è´¹Â¥9.9
4. **AIç”Ÿæˆ** â†’ ç”Ÿæˆå†™å®å®å®ç…§ç‰‡
5. **ä¿å­˜/ä¸‹è½½** â†’ ä¿å­˜å±•ç¤ºå›¾æˆ–è§£é”åŸå›¾

### è®¡è´¹è§„åˆ™

- **ç”Ÿæˆ**ï¼šå¹¿å‘Šå…è´¹ æˆ– Â¥9.9/æ¬¡ï¼ˆå«åŸå›¾ï¼‰
- **åŸå›¾ä¸‹è½½**ï¼šå¹¿å‘Šè§£é” æˆ– Â¥9.9/æ¬¡

### æ•°æ®ä¿ç•™

- é»˜è®¤ä¿ç•™30å¤©
- ç”¨æˆ·å¯ä¸€é”®åˆ é™¤æ‰€æœ‰æ•°æ®

## ğŸ”§ é…ç½®é¡¹

### ç¯å¢ƒå˜é‡

åœ¨ `app.js` ä¸­ä¿®æ”¹ï¼š

```javascript
// äº‘å¼€å‘ç¯å¢ƒID
env: 'your-env-id'

// ä»·æ ¼é…ç½®ï¼ˆåˆ†ï¼‰
price: {
  gen_with_original_1: 990,  // Â¥9.9
  unlock_original_1: 990      // Â¥9.9
}
```

### å¹¿å‘Šé…ç½®

åœ¨ `pages/unlock/unlock.js` ä¸­ä¿®æ”¹ï¼š

```javascript
// æ¿€åŠ±è§†é¢‘å¹¿å‘Šå•å…ƒID
adUnitId: 'your-ad-unit-id'
```

## ğŸ“‹ æ•°æ®åº“ç´¢å¼•å»ºè®®

```
uploads: openid+created_at, sha256
ultrasound_validations: openid+created_at, uploadFileID
unlock_sessions: openid+created_at, expires_at, unlock_token
generation_jobs: openid+created_at, status, job_id
assets: job_id
orders: openid+created_at, order_id
payments: order_id, wx_txn_id(å”¯ä¸€)
gallery_items: enabled+sort
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **AIç”ŸæˆæœåŠ¡**ï¼šå·²æ¥å…¥ä¸ƒç‰›å›¾ç”Ÿå›¾APIï¼ˆ`cloudfunctions/generationCreate/index.js`ï¼‰ï¼Œå¯é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–APIé…ç½®
2. **å¹¿å‘ŠéªŒè¯**ï¼šç”Ÿäº§ç¯å¢ƒåº”éªŒè¯å¹¿å‘Šè§‚çœ‹æ˜¯å¦å®Œæ•´
3. **æ”¯ä»˜å®‰å…¨**ï¼šç¡®ä¿æ”¯ä»˜å›è°ƒéªŒç­¾æ­£ç¡®é…ç½®
4. **éšç§åˆè§„**ï¼šç¡®ä¿éšç§æ”¿ç­–ã€ç”¨æˆ·åè®®ç¬¦åˆæ³•è§„è¦æ±‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å‚è€ƒï¼Œå•†ä¸šä½¿ç”¨è¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚
